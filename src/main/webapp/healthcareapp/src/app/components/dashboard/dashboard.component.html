<div class="bg  pb-5" *ngIf="!isAdmin">
<div class="card m-auto">
  <div class="card-header" >
    <span class=" fs-4 p-2">
      {{'patientRecords' | translate}}
     
    </span>
  </div>

  <div class="card-body pt-0">
    <div class="row">
      <div class="col-7">  
        <mat-form-field appearance="standard">
          <mat-label>{{'search' | translate }}</mat-label>
          <input matInput (keyup)="applyFilter($event)" #input>
        </mat-form-field>
      </div>
      <div class="col-5 pt-4">
        <mat-radio-group class="fs-6 mx-2" [(ngModel)]="patientFilter" aria-label="Select an option">
          <mat-radio-button class="mx-3" [value]="2" (change)="radioChange($event)">Not Consulted Patient</mat-radio-button>
          <mat-radio-button [value] ="1" (change)="radioChange($event)">Consulted Patient</mat-radio-button>
        </mat-radio-group>
      </div>
    <!-- {{dataSource.data | json}} -->
  </div>
    <table mat-table [dataSource]="dataSource" matSort  (matSortChange)="announceSortChange($event)"
        class="mat-elevation-z8">

      <ng-container  matColumnDef="ABHA Id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by abhaId">
        {{'ABHA ID' | translate}}
        </th>
        <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
            {{element.abhaId}}
        </td>
      </ng-container>
      
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by name">
        {{'name' | translate}}
       </th>
        <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
            {{element.firstName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by age">
          {{'age' | translate}}
         </th>
         <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
          {{element.age}}
      </td>
      </ng-container>

      <ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef>{{'phoneNumber' | translate}}</th>
        <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
          {{element.phoneNumber}}
      </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by email">
          {{'email' | translate}}
         </th>
         <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
          {{element.email}}
        </td>
      </ng-container>

      <ng-container matColumnDef="createdOn">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by createdOn">
          {{'createdOn' | translate}}
         </th>
         <td class="cursor-pointer" mat-cell *matCellDef="let element" routerLink="/patientDetails" [queryParams]="{id : element.id}">
          {{element.createdOn.substring(0,10)}}
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="text-center">Action</th>
        <td mat-cell *matCellDef="let element"  class="text-center">
          <button  mat-raised-button  matTooltip="Add new Consultation record" class="cursor-pointer" routerLink="/addConsultation" color="primary" [queryParams]="{id : element.id}" aria-hidden="false" aria-label="Consultation Details"> 
            <mat-icon>add</mat-icon>
            Consultation
          </button>
        </td>>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                 showFirstLastButtons 
                 aria-label="Select page of periodic elements">
    </mat-paginator>
  </div>
</div>
</div>
